<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
  <title>Work Day Scheduler</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>




<body>
  <header class="jumbotron">
    <h1 class="display-3">Work Day Scheduler</h1>
    <p class="lead">A simple calendar app for scheduling your work day</p>
    <p id="currentDay" class="lead"></p>
  </header>
  <div class="container">
    <!-- Timeblocks go here -->

      <div class="timeBlock row hour-9" data-hour="9" id="9">
        <div class="hour col-md-1">
          9am
        </div>
        <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
          placeholder="Update Schedule Here"></textarea>
        <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
      </div>
    
    <div class="timeBlock row hour-10" data-hour="10" id="10">
      <div class="hour col-md-1">
        10am
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-11" data-hour="11" id="11">
      <div class="hour col-md-1">
        11am
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-12" data-hour="12" id="12">
      <div class="hour col-md-1">
        12pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10" placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-13" data-hour="13" id="13">
      <div class="hour col-md-1">
        1pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-14" data-hour="14" id="14">
      <div class="hour col-md-1">
        2pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-15" data-hour="15" id="15">
      <div class="hour col-md-1">
        3pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-16" data-hour="16" id="16">
      <div class="hour col-md-1">
        4pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <div class="timeBlock row hour-17" data-hour="17" id="7">
      <div class="hour col-md-1">
        5pm
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1 fas fa-save"></button>
    </div>
    
    <!-- <div class="timeBlock row hour-18" data-hour="18" id="18">
      <div class="hour col-md-1">
        18:00
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1">Save</button>
    </div>
    
    <div class="timeBlock row hour-19" data-hour="19" id="19">
      <div class="hour col-md-1">
        19:00
      </div>
      <textarea id="textInput" rows="1" cols="100vw" class="description col-md-10"
        placeholder="Update Schedule Here"></textarea>
      <button type="button" class="saveBtn col-md-1">Save</button>
    </div> -->
    <br>
    <br>
    <br>
  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script type="text/javascript">

    var dateTime = moment().format('LLLL');
    var scheduleItem = localStorage.getItem("#textInput");
    var saveButton = document.querySelector("#button");
    var timeBlockDiv = "";


    // console.log(dateTime);

    $("#currentDay").html(dateTime);
    var currentHour = moment().hours();
    var hourArray = $(".timeBlock");

    // console.log(hourArray);
    for (i = 0; i < hourArray.length; i++) {
      // console.log(currentHour);

      timeBlockDiv = $(hourArray[i]).attr("data-hour");
      // console.log(timeBlockDiv);
      var hourDiv = $(hourArray[i]).hasClass("hour-" + i);
      // console.log(hourDiv);
      if (timeBlockDiv == currentHour) {
        $(hourArray[i]).addClass("present");
      } else if (timeBlockDiv < currentHour) {
        $(hourArray[i]).addClass("past");
      } else if (timeBlockDiv > currentHour) {
        $(hourArray[i]).addClass("future");
      }
    };

    // window.localStorage.setItem("#textInput", JSON.stringify(scheduleItem));

    // console.log(JSON.parse(window.localStorage.getItem("#textInput")));
    // window.localStorage.getItem("#textInput");

    // function storeMessage (){
    $(".saveBtn").on("click", function () {
      let value = $(this).siblings(".description").val();
      let time = $(this).parent().attr("id");
      console.log(value);
      console.log(time);

      let todos = JSON.parse(window.localStorage.getItem("textStorage")) || [];
      todos.push({ time, value });
      console.log(todos);
      window.localStorage.setItem("textStorage", JSON.stringify(todos));
      // $(this).siblings()
      console.log("button works here, too.")
    });
    let savedUpdate = JSON.parse(window.localStorage.getItem("textStorage"));

    $(".description").each(function () {
      let id = $(this).parent().attr("id");
      for (let i = 0; i < savedUpdate.length; i++) {
        if (id == savedUpdate[i].time) {
          $(this).text(savedUpdate[i].value)
        }
      }
    });
      // };


      // $("#button").html(scheduleItem);
      // console.log("button works!");

  </script>
</body>

</html>